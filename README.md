# AI Global Stock Autotrading System (Client-Server Architecture)

This project is a sophisticated simulation of an AI-powered, fully automated stock trading dashboard, now refactored into a robust **client-server architecture** ready for cloud deployment. It focuses on major global semiconductor stocks and demonstrates how different hedge fund strategies can be deployed based on real-time market analysis. The secure backend is powered by the Google Gemini API to make high-level strategic decisions and generate trade signals.

---

## ‚ú® Core Features

-   **Client-Server Architecture**: The application is now split into a secure backend (Node.js/Express) and a dynamic frontend (React). This is a production-ready setup that ensures API keys and business logic are never exposed to the client browser.
-   **Sophisticated Market Simulation**: The **backend** simulates a high-fidelity, real-time market feed for 6 major semiconductor stocks. The data is generated by a sophisticated model that emulates professional data feeds like **Yahoo Finance (yfinance)**, incorporating dynamic factors like trend, momentum, mean-reversion, and volatility for each stock individually. This provides a realistic testbed for the AI strategies.
-   **Real-time Data with WebSockets**: The frontend receives live market ticks from the backend via a WebSocket connection, ensuring low-latency updates.
-   **Real-time, Timezone-Aware Market Hours**: The simulation engine respects the actual trading hours of the relevant stock exchanges. It actively trades Korean stocks during KRX hours (09:00-15:30 KST) and US stocks during NYSE/NASDAQ hours (09:30-16:00 ET), providing a much more realistic trading environment.
-   **AI-Powered Engine (Secure Backend)**: Utilizes the Google Gemini API for multiple AI personas, all running securely on the server:
    -   **Chief Investment Officer (CIO)**: Analyzes the overall market regime (Trending, Ranging, etc.) and selects the most appropriate high-level hedge fund strategy.
    -   **Quantitative Analyst**: Analyzes individual stocks based on quantitative factors (Value, Momentum, etc.) within the CIO's strategic framework to generate BUY/SELL signals.
    -   **ML Inference Model**: Emulates a time-series machine learning model that uses technical features (RSI, price change, volatility) and a softmax probability output with a confidence threshold to make short-term predictions.
    -   **Sector-Aware Reasoning**: The Analyst AI's reasoning is enhanced with expert-defined industry context, leading to more nuanced trade decisions.
-   **Dynamic Hedge Fund Strategies**:
    -   **Alpha Momentum**: Capitalizes on trending markets.
    -   **Mean Reversion**: Trades on the expectation that prices will revert to their average.
    -   **Pairs Trading (Statistical Arbitrage)**: A market-neutral strategy that trades on the statistical relationship between two correlated stocks (e.g., Micron & SK Hynix).
    -   **Deep Hedging (ML)**: A machine-learning-driven approach for volatile or ranging markets.
    -   **Jocoding's Simple MA Cross**: A classic, rule-based strategy that buys on a "Golden Cross" and sells on a "Dead Cross".
    -   **Risk Off**: A safety-first mode that liquidates positions and holds cash.
-   **Comprehensive Portfolio Management (Backend-Managed)**:
    -   Tracks cash and holdings across multiple currencies with real-time exchange rate application.
    -   Full support for **Long**, **Short**, and **Pairs Trade** positions.
    -   Virtual bank account for managing trading capital.
-   **Interactive Data Visualization**:
    -   Normalized performance chart to compare all stocks from a common baseline.
    -   Detailed candlestick charts for each individual stock.
    -   **Live trade markers** (‚ñ≤ for buy, ‚ñº for sell) plotted directly on the charts.
-   **Real-time Discord Notifications (from Backend)**: Pushes all AI trade decisions to a Discord channel via webhooks for instant monitoring.
-   **Modern UI/UX**:
    -   Sleek, responsive interface built with Tailwind CSS and Vite.
    -   Includes both **Light and Dark modes**.
    -   Real-time logs for all AI decisions and trade activities.

---

## üõ†Ô∏è Tech Stack

-   **Frontend**: React, TypeScript, Vite
-   **Backend**: Node.js, Express, WebSocket (Socket.IO)
-   **Styling**: Tailwind CSS
-   **Charting**: Recharts
-   **AI**: `@google/genai` for Google Gemini API integration (on backend)
-   **Containerization**: Docker

---

## üöÄ Deployment (Cloud Run)

This application is containerized with Docker and ready for easy deployment to serverless platforms like Google Cloud Run.

### Prerequisites
- Google Cloud SDK (`gcloud`) installed and configured.
- Docker installed.
- A Google Cloud project with the Artifact Registry and Cloud Run APIs enabled.

### 1. Environment Variable Configuration
The backend requires environment variables. These should be set as secrets in Google Secret Manager for production use.

-   **`API_KEY` (Required)**: Your Google Gemini API key.
-   **`DISCORD_WEBHOOK_URL` (Optional)**: Your Discord webhook URL for trade alerts.
-   **`PORT`**: This is automatically provided by Cloud Run, typically `8080`.

### 2. Build and Push the Docker Image

```bash
# 1. Configure a repository in Artifact Registry
gcloud artifacts repositories create my-app-repo --repository-format=docker --location=asia-northeast3

# 2. Authenticate Docker
gcloud auth configure-docker asia-northeast3-docker.pkg.dev

# 3. Build the image
# Replace [PROJECT_ID] with your Google Cloud Project ID
docker build -t asia-northeast3-docker.pkg.dev/[PROJECT_ID]/my-app-repo/ai-trader:latest .

# 4. Push the image
docker push asia-northeast3-docker.pkg.dev/[PROJECT_ID]/my-app-repo/ai-trader:latest
```

### 3. Deploy to Cloud Run

```bash
# Deploy the container image to Cloud Run
gcloud run deploy ai-trading-system \
  --image=asia-northeast3-docker.pkg.dev/[PROJECT_ID]/my-app-repo/ai-trader:latest \
  --platform=managed \
  --region=asia-northeast3 \
  --allow-unauthenticated \
  # --set-secrets=API_KEY=your-gemini-key:latest,DISCORD_WEBHOOK_URL=your-discord-secret:latest
```
*Note: For a real deployment, you should configure secrets in Secret Manager and link them using the `--set-secrets` flag instead of hardcoding them.*
